<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Directory Embedding Examples</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .example-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .example-title {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .code-block code {
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        iframe {
            border: 2px solid #007bff;
            border-radius: 8px;
            margin: 10px 0;
        }
        .widget-container {
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            min-height: 200px;
        }
        .controls {
            margin: 15px 0;
            padding: 15px;
            background: #e9ecef;
            border-radius: 5px;
        }
        .controls label {
            margin-right: 15px;
            font-weight: bold;
        }
        .controls select, .controls input {
            margin-right: 10px;
            padding: 5px;
        }
        .demo-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Staff Directory Embedding Examples</h1>
    
    <div class="demo-info">
        <h3>ðŸš€ Demo Setup Instructions</h3>
        <p><strong>To make these examples work:</strong></p>
        <ol>
            <li>Upload <code>embed_directory.php</code> to your web server</li>
            <li>Upload <code>directory_widget.js</code> to your web server</li>
            <li>Update the URLs in this file to point to your server</li>
            <li>Make sure your <code>config.php</code> and database are accessible</li>
        </ol>
        <p><em>Currently showing placeholder URLs - replace with your actual server URLs!</em></p>
    </div>

    <!-- Example 1: Basic iframe -->
    <div class="example-section">
        <h2 class="example-title">1. Basic iframe Embedding</h2>
        <p>Simple iframe that displays the full directory:</p>
        
        <div class="code-block">
            <code>&lt;iframe src="https://gorio.page/directory/embed_directory.php" 
        width="100%" 
        height="500" 
        frameborder="0"&gt;
&lt;/iframe&gt;</code>
        </div>
        
        <h4>Live Example:</h4>
        <iframe src="https://gorio.page/directory/embed_directory.php" 
                width="100%" 
                height="500" 
                frameborder="0">
            Your browser doesn't support iframes. Please update the URL to your server.
        </iframe>
    </div>

    <!-- Example 2: iframe with parameters -->
    <div class="example-section">
        <h2 class="example-title">2. iframe with Parameters</h2>
        <p>iframe showing only staff with minimal theme:</p>
        
        <div class="code-block">
            <code>&lt;iframe src="https://gorio.page/directory/embed_directory.php?theme=minimal&sections=staff" 
        width="100%" 
        height="400" 
        frameborder="0"&gt;
&lt;/iframe&gt;</code>
        </div>
        
        <div class="controls">
            <label>Theme:</label>
            <select id="iframe-theme" onchange="updateIframe()">
                <option value="minimal">Minimal</option>
                <option value="default">Default</option>
            </select>
            
            <label>Sections:</label>
            <select id="iframe-sections" onchange="updateIframe()">
                <option value="both">Both</option>
                <option value="staff">Staff Only</option>
                <option value="departments">Departments Only</option>
            </select>
            
            <label>Department:</label>
            <input type="text" id="iframe-dept" placeholder="Leave empty for all" onchange="updateIframe()">
        </div>
        
        <h4>Live Example:</h4>
        <iframe id="demo-iframe" 
                src="https://gorio.page/directory/embed_directory.php?theme=minimal&sections=staff" 
                width="100%" 
                height="400" 
                frameborder="0">
        </iframe>
    </div>

    <!-- Example 3: JavaScript Widget -->
    <div class="example-section">
        <h2 class="example-title">3. JavaScript Widget</h2>
        <p>Dynamic widget with search and auto-refresh capabilities:</p>
        
        <div class="code-block">
            <code>&lt;!-- Include the widget script --&gt;
&lt;script src="https://gorio.page/directory/directory_widget.js"&gt;&lt;/script&gt;

&lt;!-- Create container --&gt;
&lt;div id="staff-directory-widget"&gt;&lt;/div&gt;

&lt;!-- Initialize widget --&gt;
&lt;script&gt;
initStaffDirectory({
    apiUrl: 'https://gorio.page/directory/embed_directory.php',
    containerId: 'staff-directory-widget',
    showSearch: true,
    sections: 'both'
});
&lt;/script&gt;</code>
        </div>
        
        <div class="controls">
            <label>Sections:</label>
            <select id="widget-sections">
                <option value="both">Both</option>
                <option value="staff">Staff Only</option>
                <option value="departments">Departments Only</option>
            </select>
            
            <label>
                <input type="checkbox" id="widget-search" checked> Enable Search
            </label>
            
            <label>
                <input type="checkbox" id="widget-refresh"> Auto Refresh (5 min)
            </label>
            
            <button onclick="updateWidget()">Update Widget</button>
            <button onclick="refreshWidget()">Refresh Now</button>
        </div>
        
        <h4>Live Example:</h4>
        <div id="demo-widget" class="widget-container">
            <p>Loading widget... (Make sure to update URLs to your server)</p>
        </div>
    </div>

    <!-- Example 4: JSON API -->
    <div class="example-section">
        <h2 class="example-title">4. JSON API Usage</h2>
        <p>Fetch data as JSON and create custom displays:</p>
        
        <div class="code-block">
            <code>fetch('https://gorio.page/directory/embed_directory.php?format=json')
    .then(response => response.json())
    .then(data => {
        console.log('Departments:', data.departments);
        console.log('Staff:', data.staff);
        // Create your custom display here
    });</code>
        </div>
        
        <button onclick="fetchJsonData()">Fetch JSON Data</button>
        <button onclick="createCustomDisplay()">Create Custom Display</button>
        
        <h4>JSON Response Preview:</h4>
        <pre id="json-display" style="background: #f4f4f4; padding: 15px; border-radius: 4px; max-height: 300px; overflow-y: auto;"></pre>
        
        <h4>Custom Display Example:</h4>
        <div id="custom-display" style="border: 1px solid #ddd; padding: 15px; min-height: 100px; border-radius: 4px;"></div>
    </div>

    <!-- Example 5: WordPress Shortcode -->
    <div class="example-section">
        <h2 class="example-title">5. WordPress Integration</h2>
        <p>Add this to your WordPress theme's functions.php:</p>
        
        <div class="code-block">
            <code>function staff_directory_shortcode($atts) {
    $atts = shortcode_atts(array(
        'department' => '',
        'sections' => 'both',
        'height' => '500'
    ), $atts);
    
    $dept_param = $atts['department'] ? '&dept=' . urlencode($atts['department']) : '';
    $url = 'https://gorio.page/directory/embed_directory.php?theme=minimal&sections=' . $atts['sections'] . $dept_param;
    
    return '&lt;iframe src="' . $url . '" width="100%" height="' . $atts['height'] . '" frameborder="0"&gt;&lt;/iframe&gt;';
}
add_shortcode('staff_directory', 'staff_directory_shortcode');</code>
        </div>
        
        <p><strong>Usage in WordPress posts/pages:</strong></p>
        <div class="code-block">
            <code>[staff_directory sections="staff" department="Academic Affairs"]</code>
        </div>
    </div>

    <!-- Include the widget script (update URL to your server) -->
    <script src="https://gorio.page/directory/directory_widget.js"></script>
    
    <script>
        // Global widget instance
        let demoWidget = null;
        
        // Initialize widget on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Only initialize if the script loaded successfully
            if (typeof initStaffDirectory === 'function') {
                demoWidget = initStaffDirectory({
                    apiUrl: 'https://gorio.page/directory/embed_directory.php',
                    containerId: 'demo-widget',
                    showSearch: true,
                    sections: 'both'
                });
            } else {
                document.getElementById('demo-widget').innerHTML = 
                    '<p style="color: red;">Widget script not loaded. Please update the URL to your server.</p>';
            }
        });
        
        // iframe controls
        function updateIframe() {
            const theme = document.getElementById('iframe-theme').value;
            const sections = document.getElementById('iframe-sections').value;
            const dept = document.getElementById('iframe-dept').value;
            
            let url = 'https://gorio.page/directory/embed_directory.php?theme=' + theme + '&sections=' + sections;
            if (dept) {
                url += '&dept=' + encodeURIComponent(dept);
            }
            
            document.getElementById('demo-iframe').src = url;
        }
        
        // Widget controls
        function updateWidget() {
            const sections = document.getElementById('widget-sections').value;
            const showSearch = document.getElementById('widget-search').checked;
            const autoRefresh = document.getElementById('widget-refresh').checked ? 5 : 0;
            
            if (typeof initStaffDirectory === 'function') {
                demoWidget = initStaffDirectory({
                    apiUrl: 'https://gorio.page/directory/embed_directory.php',
                    containerId: 'demo-widget',
                    sections: sections,
                    showSearch: showSearch,
                    autoRefresh: autoRefresh
                });
            }
        }
        
        function refreshWidget() {
            if (demoWidget && demoWidget.loadDirectory) {
                demoWidget.loadDirectory();
            }
        }
        
        // JSON API example
        function fetchJsonData() {
            fetch('https://gorio.page/directory/embed_directory.php?format=json')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('json-display').textContent = JSON.stringify(data, null, 2);
                })
                .catch(error => {
                    document.getElementById('json-display').textContent = 'Error: ' + error.message + '\n\nMake sure to update the URL to your server.';
                });
        }
        
        function createCustomDisplay() {
            fetch('https://gorio.page/directory/embed_directory.php?format=json')
                .then(response => response.json())
                .then(data => {
                    let html = '<h4>Custom Staff List</h4>';
                    
                    if (data.staff) {
                        html += '<ul>';
                        data.staff.forEach(person => {
                            html += `<li><strong>${person.name}</strong> - ${person.title} (${person.department})</li>`;
                        });
                        html += '</ul>';
                    } else {
                        html += '<p>No data available. Please check your server URL.</p>';
                    }
                    
                    document.getElementById('custom-display').innerHTML = html;
                })
                .catch(error => {
                    document.getElementById('custom-display').innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
                });
        }
    </script>
</body>
</html>